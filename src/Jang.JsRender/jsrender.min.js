window.JsViews || window.jQuery && jQuery.views || function (a, b) { function G(a) { try { return c(a) } catch (b) { } return a } function F(a) { return y[a] || (y[a] = "&#" + a.charCodeAt(0) + ";") } function E(a) { var b, c, d, e = [], f = a.length, g = "try{var views=" + (o ? "jQuery" : "JsViews") + '.views,tag=views.renderTag,enc=views.encode,html=views.encoders.html,$ctx=$view && $view.ctx,result=""+\n\n'; for (d = 0; d < f; d++) { c = a[d]; if (c[0] === "*") { g = g.slice(0, d ? -1 : -3) + ";" + c[1] + (d + 1 < f ? "result+=" : "") } else if ("" + c === c) { g += '"' + c + '"+' } else { var h = c[0], i = c[1], j = c[2], k = c[3], l = c[4], m = l + '||"")+'; if (j) { e.push(E(j)) } g += h === "=" ? !i || i === "html" ? "html(" + m : i === "none" ? "(" + m : 'enc("' + i + '",' + m : 'tag("' + h + '",$view,"' + (i || "") + '",' + (j ? e.length : '""') + "," + k + (l ? "," : "") + l + ")+" } } b = new Function("$data, $view", g.slice(0, -1) + ";return result;\n\n}catch(e){return views.err(e);}"); b.nested = e; return b } function D(a) { function k(a, e, i, k, l, o, p, q, t, v) { function D(a, b, c, d, e, f, g, h, i, j, k) { return B ? (B = !g, B ? a : '"') : A ? (A = !h, A ? a : '"') : d ? b.replace(r, C) + d : e ? z ? "" : (x = n, "\b" + b + ":") : c ? (z++, b.replace(r, C) + "(") : i ? (z--, ")") : b ? b.replace(r, C) : f ? "," : j ? z ? "" : x ? (x = m, "\b") : "," : (B = g, A = h, '"') } var x, y = "", z = 0, A = m, B = m; i = i || k; j(v); if (l) { if (f.allowCode) { g.push(["*", o.replace(u, "$1")]) } } else if (i) { if (i === "else") { h = d.pop(); g = h[2]; e = n } o = o ? (o + " ").replace(s, D).replace(w, function (a, b, c) { y += b + ","; return "" }) : ""; o = o.slice(0, -1); b = [i, p ? q || "none" : "", e && [], "{" + y + "_hash:'" + y + "',_path:'" + o + "'}", o]; if (e) { d.push(h); h = b } g.push(b) } else if (t) { h = d.pop() } c = v + a.length; if (!h) { throw "Expected block tag" } g = h[2] } function j(b) { b -= c; if (b) { g.push(a.substr(c, b).replace(t, "\\n")) } } var b, c = 0, d = [], e = [], g = e, h = [, , e]; a = a.replace(v, "\\$1"); a.replace(i, k); j(a.length); return E(e) } function C(a, b, c, d, e, f, g, h) { return c ? (d ? e ? "$view." + e : c : "$data." + c) + (f || "") : g || b || "" } function B(a, b, c, d, e) { c = c || { viewsCount: 0, ctx: f.helpers }; var g = c && c.ctx; return { jsViews: "v1.0pre", path: b || "", itemNumber: ++c.viewsCount || 1, viewsCount: 0, tmpl: e, data: d || c.data || {}, ctx: a && a === g ? g : g ? l(l({}, g), a) : a || {}, parent: c} } var c, d, e, f, g, h, i, j, k, l, m = false, n = true, o = a.jQuery, p = a.document, q = /^[^<]*(<[\w\W]+>)[^>]*$|\{\{\! /, r = /^(true|false|null|[\d\.]+)|(\w+|\$(view|data|ctx|(\w+)))([\w\.]*)|((['"])(?:\\\1|.)*\7)$/g, s = /(\$?[\w\.\[\]]+)(?:(\()|\s*(===|!==|==|!=|<|>|<=|>=)\s*|\s*(\=)\s*)?|(\,\s*)|\\?(\')|\\?(\")|(\))|(\s+)/g, t = /\r?\n/g, u = /\\(['"])/g, v = /\\?(['"])/g, w = /\x08([^\x08]+)\x08/g, x = 0, y = { "&": "&", "<": "<", ">": ">" }, z = /[\x00"&'<>]/g, A = Array.prototype.slice; if (o) { c = o; c.fn.extend({ render: function (a, b, c, d) { return h(a, this[0], b, c, d) }, template: function (a, b) { return c.template(a, this[0], b) } }) } else { d = a.$; a.JsViews = e = a.$ = c = { extend: function (a, b) { var c; for (c in b) { a[c] = b[c] } return a }, isArray: Array.isArray || function (a) { return Object.prototype.toString.call(a) === "[object Array]" }, noConflict: function () { if (a.$ === e) { a.$ = d } return e } } } l = c.extend; l(c, { views: f = { templates: {}, tags: { "if": function () { var a = this, c = a._view; c.onElse = function (a, d) { var e = 0, f = d.length; while (f && !d[e++]) { if (e === f) { return "" } } c.onElse = b; return h(c.data, a.tmpl, c.ctx, c) }; return c.onElse(this, arguments) }, "else": function () { var a = this._view; return a.onElse ? a.onElse(this, arguments) : "" }, each: function () { var a, b = this, c = "", d = arguments, e = d.length, f = b.tmpl, g = b._view; for (a = 0; a < e; a++) { c += d[a] ? h(d[a], f, b.ctx || g.ctx, g, b._path, b._ctor) : "" } return e ? c : c + h(g.data, f, g.ctx, g, b._path, b.tag) }, "=": function (a) { return a }, "*": function (a) { return a } }, helpers: { not: function (a) { return !a } }, allowCode: m, debugMode: n, err: function (a) { return f.debugMode ? "<br/><b>Error:</b> <em> " + (a.message || a) + ". </em>" : '""' }, setDelimiters: function (a, b) { var c = b.charAt(0), d = b.charAt(1); a = "\\" + a.charAt(0) + "\\" + a.charAt(1); b = "\\" + c + "\\" + d; i = a + "(?:(?:(\\#)?(\\w+(?=[!\\s\\" + c + "]))" + "|(?:(\\=)|(\\*)))" + "\\s*((?:[^\\" + c + "]|\\" + c + "(?!\\" + d + "))*?)" + "(!(\\w*))?" + "|(?:\\/([\\w\\$\\.\\[\\]]+)))" + b; i = new RegExp(i, "g") }, registerTags: j = function (a, b) { var c; if (typeof a === "object") { for (c in a) { j(c, a[c]) } } else { f.tags[a] = b } return this }, registerHelpers: k = function (a, b) { if (typeof a === "object") { var c; for (c in a) { k(c, a[c]) } } else { f.helpers[a] = b } return this }, encode: function (a, b) { return b ? (g[a || "html"] || g.html)(b) : "" }, encoders: g = { none: function (a) { return a }, html: function (a) { return String(a).replace(z, F) } }, renderTag: function (a, c, d, e, g) { var h, i, j, k = arguments, m = f.presenters; hash = g._hash, tagFn = f.tags[a]; if (!tagFn) { return "" } e = e && c.tmpl.nested[e - 1]; g.tmpl = g.tmpl || e || b; if (m && m[a]) { i = l(l({}, g.ctx), g); delete i.ctx; delete i._path; delete i.tmpl; g.ctx = i; g._ctor = a + (hash ? "=" + hash.slice(0, -1) : ""); g = l(l({}, tagFn), g); tagFn = f.tags.each } g._encode = d; g._view = c; h = tagFn.apply(g, k.length > 5 ? A.call(k, 5) : [c.data]); return h || (h === b ? "" : h.toString()) } }, render: h = function (a, b, d, e, g, h) { var i, j, k, l, m, n = ""; if (arguments.length === 2 && a.jsViews) { e = a; d = e.ctx; a = e.data } b = c.template(b); if (!b) { return "" } if (c.isArray(a)) { l = new B(d, g, e, a); j = a.length; for (i = 0, j = a.length; i < j; i++) { k = a[i]; m = k ? b(k, new B(d, g, l, k, b, this)) : ""; n += f.activeViews ? "<!--item-->" + m + "<!--/item-->" : m } } else { n += b(a, new B(d, g, e, a, b)) } return f.activeViews ? "<!--tmpl(" + (g || "") + ") " + (h ? "tag=" + h : b._name) + "-->" + n + "<!--/tmpl-->" : n }, template: function (a, b) { if (b) { if ("" + b === b) { b = D(b) } else if (o && b instanceof c) { b = b[0] } if (b) { if (o && b.nodeType) { b = c.data(b, "tmpl") || c.data(b, "tmpl", D(b.innerHTML)) } f.templates[b._name = b._name || a || "_" + x++] = b } return b } return a ? "" + a !== a ? a._name ? a : c.template(null, a) : f.templates[a] || c.template(null, q.test(a) ? a : G(a)) : null } }); f.setDelimiters("{{", "}}") } (window)